<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="全栈运维" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="努力奔向全栈运维">
<meta property="og:type" content="website">
<meta property="og:title" content="全栈运维">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="全栈运维">
<meta property="og:description" content="努力奔向全栈运维">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="全栈运维">
<meta name="twitter:description" content="努力奔向全栈运维">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/3/"/>





  <title> 全栈运维 - 努力奔向全栈运维 </title>
  












  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1262262453&web_id=1262262453" language="JavaScript"></script>
  </div>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">全栈运维</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">专注于技术</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-python">
          <a href="/Python/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Python
          </a>
        </li>
      
        
        <li class="menu-item menu-item-mysql">
          <a href="/MySQL/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            MySQL
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-download">
          <a href="/Download/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            下载
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/08/16/2015-08-16-memcache监控小工具stats命令/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/08/16/2015-08-16-memcache监控小工具stats命令/" itemprop="url">memcache监控小工具stats命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-08-16T11:50:47+08:00">
                2015-08-16
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Memcache/" itemprop="url" rel="index">
                    <span itemprop="name">Memcache</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>这里介绍memcache自带的监控小工具<code>stats命令</code><br>可以监控基本的memcache信息，像服务器信息，内存分配数据等</p>
</blockquote>
<hr>
<h2 id="stats"><a href="#stats" class="headerlink" title="stats"></a>stats</h2><p>显示服务器信息、统计数据等</p>
<pre><code>root@pts/1 $ echo &quot;stats&quot;|nc 192.168.100.13 11211
STAT pid 23160
STAT uptime 505840
STAT time 1479269732
STAT version 1.4.15
STAT libevent 2.0.21-stable
STAT pointer_size 64
STAT rusage_user 165.030300
STAT rusage_system 543.017059
STAT curr_connections 45
STAT total_connections 1363
STAT connection_structures 61
STAT reserved_fds 20
STAT cmd_get 30320614
STAT cmd_set 873560
STAT cmd_flush 0
STAT cmd_touch 13123
STAT get_hits 4126857
STAT get_misses 26193757
STAT delete_misses 2267
STAT delete_hits 23858
STAT incr_misses 12718
STAT incr_hits 610
...
STAT evictions 0
STAT reclaimed 84878
END
</code></pre><h2 id="stats-reset"><a href="#stats-reset" class="headerlink" title="stats reset"></a>stats reset</h2><p>清空统计数据</p>
<h2 id="stats-items"><a href="#stats-items" class="headerlink" title="stats items"></a>stats items</h2><p>输出各个slab中的item的数目和最老item的年龄(最后一次访问距离现在的秒数) .</p>
<pre><code>root@pts/1 $ echo &quot;stats items&quot;|nc 192.168.100.13 11211
STAT items:1:number 12854
STAT items:1:age 506027
STAT items:1:evicted 0
STAT items:1:evicted_nonzero 0
STAT items:1:evicted_time 0
STAT items:1:outofmemory 0
STAT items:1:tailrepairs 0
STAT items:1:reclaimed 521
STAT items:1:expired_unfetched 521
STAT items:1:evicted_unfetched 0
STAT items:2:number 28683
STAT items:2:age 506072
...
STAT items:18:evicted_unfetched 0
STAT items:19:number 1
STAT items:19:age 78406
STAT items:19:evicted 0
STAT items:19:evicted_nonzero 0
STAT items:19:evicted_time 0
STAT items:19:outofmemory 0
STAT items:19:tailrepairs 0
STAT items:19:reclaimed 41
STAT items:19:expired_unfetched 33
STAT items:19:evicted_unfetched 0
END
</code></pre><h2 id="stats-slabs"><a href="#stats-slabs" class="headerlink" title="stats slabs"></a>stats slabs</h2><pre><code>输出slab中更详细的item信息
</code></pre><h2 id="stats-sizes"><a href="#stats-sizes" class="headerlink" title="stats sizes"></a>stats sizes</h2><pre><code>输出所有item的大小和个数
</code></pre><h2 id="stats-cachedump"><a href="#stats-cachedump" class="headerlink" title="stats cachedump  "></a>stats cachedump <slab_id> <limit_num></limit_num></slab_id></h2><pre><code>根据&lt;slab_id&gt;输出相同的&lt;slab_id&gt;中的item信息。
&lt;limit_num&gt;是输出的个数，
当&lt;limit_num&gt;为0是输出所有的item。
</code></pre><h2 id="flush-all"><a href="#flush-all" class="headerlink" title="flush_all"></a>flush_all</h2><pre><code>使在内存中所有的item失效。加入参数则表示在N秒后失效所有item。
这项操作会立即返回，不会暂停服务器。
这个操作并`不会真的释放内存空间，而是标志所有的item为失效`
</code></pre><h2 id="stats-detail-on-off-dump"><a href="#stats-detail-on-off-dump" class="headerlink" title="stats detail [on|off|dump]"></a>stats detail [on|off|dump]</h2><pre><code>设置或者显示详细操作记录
参数为on，打开详细操作记录
参数为off，关闭详细操作记录
参数为dump，显示详细操作记录(每一个键值get、set、hit、del的次数)
</code></pre><h2 id="特殊说明"><a href="#特殊说明" class="headerlink" title="特殊说明"></a>特殊说明</h2><p>用<code>watch</code>命令来`实时查看·memcache状态 </p>
<pre><code>watch echo &quot;stats&quot; |nc 192.168.100.13 11211
</code></pre><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/15/2015-05-15-Octpress加速/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/15/2015-05-15-Octpress加速/" itemprop="url">Octpress加速</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-15T12:08:36+08:00">
                2015-05-15
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Issue"><a href="#Issue" class="headerlink" title="Issue"></a>Issue</h1><pre><code>When visit my own Octpress blog via github(opscolin.github.io), it visited very slow.
And after commont some google related setting in _config.yml, it&apos;s still very slow
</code></pre><h1 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h1><pre><code>Except modify _config.yml to commont some google related setting, there still have some font cache and ajax script.
</code></pre><h3 id="M1"><a href="#M1" class="headerlink" title="M1"></a>M1</h3><pre><code>replace with some replaced-source like 360 lib
1, source/_includes/head.html
    ajax.googleapis.com ---&gt; userso.com
2, source/_includes/custom/head.html
    fonts.googleapis.com ---&gt; userso.com
</code></pre><h3 id="M2"><a href="#M2" class="headerlink" title="M2"></a>M2</h3><pre><code>refer to http://www.chanjar.me/blog/2014/06/29/jia-kuai-octopressguo-nei-fang-wen-su-du/
</code></pre><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/15/2015-05-15-Shell脚本实现excel到json的格式转化/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/15/2015-05-15-Shell脚本实现excel到json的格式转化/" itemprop="url">Shell脚本实现excel到json的格式转化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-15T11:24:01+08:00">
                2015-05-15
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Shell/" itemprop="url" rel="index">
                    <span itemprop="name">Shell</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Requirement"><a href="#Requirement" class="headerlink" title="Requirement"></a>Requirement</h1><pre><code>    there are some excel files need to convert to Json format.
include Json level one and level two 

    and for excel files, you need to refer to some example files from
https://github.com/opscolin/ShellScripts/tree/master/Excel2Json
</code></pre><h2 id="Get-script"><a href="#Get-script" class="headerlink" title="Get script"></a>Get script</h2><pre><code>wget https://github.com/opscolin/ShellScripts/blob/master/Excel2Json/Excel2Json.sh
</code></pre><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><pre><code>bash Excel2Json.sh LevelOne.xlsx &gt; LevelOne.txt
bash Excel2Json.sh 2 LevelTwo.xlsx &gt; LevelTwo.txt

or you cat get usage by 
[root@localtest /tmp ]# bash Excel2Json.sh 
====================================================
Usage:
    #convert Level one
    Excel2Json.sh LevelOne.xlsx &gt; LevelOne.txt
    #convert Level two
    Excel2Json.sh 2 LevelTwo.xlsx &gt; LevelTwo.txt
====================================================
</code></pre><h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><pre><code>## level one
[root@localtest liuchao]# bash Excel2Json.sh LevelOne.csv 
[
    {
        &quot;id&quot;:1,
        &quot;name&quot;:&quot;北京&quot;
    },
    {
        &quot;id&quot;:2,
        &quot;name&quot;:&quot;陕西&quot;
    },
    {
        &quot;id&quot;:3,
        &quot;name&quot;:&quot;河北&quot;
    },
]

# level two

[root@localtest liuchao]# bash Excel2Json.sh 2 LevelTwo.csv
[
    {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;北京&quot;,
        &quot;List&quot;: [
            {
                 &quot;id&quot;: 1,
                 &quot;name&quot;: &quot;东城区&quot;
            },
            {
                 &quot;id&quot;: 2,
                 &quot;name&quot;: &quot;西城区&quot;
            },
            {
                 &quot;id&quot;: 3,
                 &quot;name&quot;: &quot;崇文区&quot;
            },
            {
                 &quot;id&quot;: 4,
                 &quot;name&quot;: &quot;宣武区&quot;
            },
....
</code></pre><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/05/2015-05-05-Redis有序集合Sorted-Sets说明/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/05/2015-05-05-Redis有序集合Sorted-Sets说明/" itemprop="url">Redis有序集合Sorted Sets说明</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-05T13:08:36+08:00">
                2015-05-05
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Redis/" itemprop="url" rel="index">
                    <span itemprop="name">Redis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Redis-Sorted-Set"><a href="#Redis-Sorted-Set" class="headerlink" title="Redis Sorted-Set"></a>Redis Sorted-Set</h1><h2 id="zadd"><a href="#zadd" class="headerlink" title="zadd"></a>zadd</h2><pre><code>ZADD key score member [score member ...]
e.g.
    zadd myzset 1 one
# zrange myzset 0 -1 withscores
</code></pre><h2 id="zrem"><a href="#zrem" class="headerlink" title="zrem"></a>zrem</h2><pre><code>ZREM key member [member ...]
e.g.
    zrem myzset one
</code></pre><h2 id="zrange"><a href="#zrange" class="headerlink" title="zrange"></a>zrange</h2><pre><code>ZRANGE key start stop [WITHSCORES]
e.g.
    zrange myzset 0 -1 withscores
</code></pre><h2 id="zrevrange"><a href="#zrevrange" class="headerlink" title="zrevrange"></a>zrevrange</h2><pre><code>ZREVRANGE key start stop [WITHSCORES]
返回名称为key的zset(按score从大到小排序)中的index从start到end的所有元素
</code></pre><h2 id="zincrby"><a href="#zincrby" class="headerlink" title="zincrby"></a>zincrby</h2><pre><code>ZINCRBY key increment member
如果在名称为key的zset中已经存在元素member，则该元素的score增加increment;否则向集合中添加该元素，其score的值为increment
e.g.
    zincrby key 3 one
    zincrby key 1 five
    127.0.0.1:6379[8]&gt; ZRANGE myzset 0 -1 withscores
     1) &quot;five&quot;
     2) &quot;1&quot;
     3) &quot;two&quot;
     4) &quot;2&quot;
     5) &quot;three&quot;
     6) &quot;3&quot;
     7) &quot;one&quot;
     8) &quot;4&quot;
     9) &quot;four&quot;
    10) &quot;7&quot;
</code></pre><h2 id="zrank"><a href="#zrank" class="headerlink" title="zrank"></a>zrank</h2><pre><code>ZRANK key member
返回名称为key的zset中member元素的排名(按score从小到大排序)即下标
e.g.
    127.0.0.1:6379[8]&gt; ZRANGE myzset 0 -1 withscores
     1) &quot;five&quot;
     2) &quot;1&quot;
     3) &quot;two&quot;
     4) &quot;2&quot;
     5) &quot;three&quot;
     6) &quot;3&quot;
     7) &quot;one&quot;
     8) &quot;4&quot;
     9) &quot;four&quot;
    10) &quot;7&quot;
    127.0.0.1:6379[8]&gt; zrank myzset five
    (integer) 0
    127.0.0.1:6379[8]&gt; zrank myzset one
    (integer) 3
</code></pre><h2 id="zrevrank"><a href="#zrevrank" class="headerlink" title="zrevrank"></a>zrevrank</h2><pre><code>ZREVRANK key member
返回名称为key的zset中member元素的排名(按score从大到小排序)即下标
</code></pre><h2 id="zrangebyscore"><a href="#zrangebyscore" class="headerlink" title="zrangebyscore"></a>zrangebyscore</h2><pre><code>ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]
e.g.
    zrangebysocre myzset 2 4 withscores
</code></pre><h2 id="zcount"><a href="#zcount" class="headerlink" title="zcount"></a>zcount</h2><pre><code>ZCOUNT key min max
返回集合中score在给定区间的数量
e.g.
    zcount key
</code></pre><h2 id="zcard"><a href="#zcard" class="headerlink" title="zcard"></a>zcard</h2><pre><code>集合个数
ZCARD key
</code></pre><h2 id="zscore"><a href="#zscore" class="headerlink" title="zscore"></a>zscore</h2><pre><code>返回给定元素对应的score
ZSCORE key member
</code></pre><h2 id="zremrangebyrank"><a href="#zremrangebyrank" class="headerlink" title="zremrangebyrank"></a>zremrangebyrank</h2><h2 id="zremrangebyscore"><a href="#zremrangebyscore" class="headerlink" title="zremrangebyscore"></a>zremrangebyscore</h2><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/05/05/2015-05-05-Redis集合Sets说明/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/05/05/2015-05-05-Redis集合Sets说明/" itemprop="url">Redis集合Sets说明</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-05-05T10:08:36+08:00">
                2015-05-05
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Redis/" itemprop="url" rel="index">
                    <span itemprop="name">Redis</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Redis-Sets"><a href="#Redis-Sets" class="headerlink" title="Redis Sets"></a>Redis Sets</h1><pre><code>## SADD -- add item into set
    SADD myset &quot;James&quot;
    # if success, return 1, else return 0

## SMEMBERS -- check members in set
    SMEMBERS myset

## SREM -- delete members from set
    SREM myset &quot;Harry&quot;
    # if delete, return 1, else return 0, e.g. delete an un-exist member

## SPOP -- return and delete one key by random in set
    SPOP myset

## SDIFF -- 返回所有给定的key与第一个key的差集
    SDIFF set1 set2
    # return member only in set1 and not in set2

## SDIFFSTORE -- 返回所有给定的key与第一个key的差集, 并将结果保存为另一个key
    SDIFFSTORE result-set set1 set2
    SMEMBERS result-set

## SINTER -- 返回所有给定的key的交集
    SINTER set1 set2 [set3 ... setN]

## SINTERSTORE -- 交集结果保存为另一个set
    SINTERSTORE result-set set1 set2 [set3 ... setN]

## SUNION -- 并集
    SUNION set1 set2 [set3 ... setN]

## SUNIONSTORE -- 并集结果保存到另一个set
    SUNIONSTORE result-set set1 set2 [set3 ... setN]

## SMOVE -- 从第一个key对应的set中移除member并添加到第二个对应set中
    SMOVE first-set result-set member-name
        127.0.0.1:6379[8]&gt; SMEMBERS t_num2
        1) &quot;five&quot;
        2) &quot;three&quot;
        3) &quot;one&quot;
        127.0.0.1:6379[8]&gt; SMOVE t_num2 t_num4 five
        (integer) 1
        127.0.0.1:6379[8]&gt; SMEMBERS t_num2
        1) &quot;three&quot;
        2) &quot;one&quot;
        127.0.0.1:6379[8]&gt; SMEMBERS t_num4
        1) &quot;five&quot;
## SCARD -- return number of the set
    SCARD myset

## SINMEMBER -- test if member is in set
    SINMEMBER myset member-name

## SRANDMEMBER -- 随机返回名称为key的set的一个元素，但是不删除元素
    SRANDMEMBER myset
</code></pre><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/04/29/2015-04-29-Docker中resin报关于region错误/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/04/29/2015-04-29-Docker中resin报关于region错误/" itemprop="url">Docker中resin报关于region错误</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-29T11:08:36+08:00">
                2015-04-29
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="The-question"><a href="#The-question" class="headerlink" title="The question"></a>The question</h2><pre><code>## get system time 
[root@c700200529e2 bin]# date
Wed Apr 27 13:40:27 CST 2015

## check resin starting log
Please use CMSClassUnloadingEnabled in place of CMSPermGenSweepingEnabled in the future
Resin-4.0.40 (built Fri, 16 May 2014 11:10:25 PDT)
Copyright(c) 1998-2012 Caucho Technology.  All rights reserved.

  Using Resin(R) Open Source under the GNU Public License (GPL).

  See http://www.caucho.com for information on Resin Professional,
  including caching, clustering, JNI acceleration, and OpenSSL integration.

Starting Resin on Mon, 27 Apr 2015 05:43:20 +0000 (UTC)

## check mysql or redis data related time from resin 
the date is also wrong !

## but check mysql instance time in mysql container ,it&apos;s correct!
mysql&gt; select now() ;
+---------------------+
| now()               |
+---------------------+
| 2015-04-27 13:54:52 |
+---------------------+
1 row in set (0.00 sec)
</code></pre><h2 id="Reason"><a href="#Reason" class="headerlink" title="Reason"></a>Reason</h2><pre><code>After confirm , the error is from resin application 
</code></pre><h2 id="Fixed"><a href="#Fixed" class="headerlink" title="Fixed"></a>Fixed</h2><pre><code>add item `-Duser.timezone=GMT+8:00` into start scripts

[root@c700200529e2 /]# tail -3 /usr/local/resin/bin/resin.sh 

exec $JAVA_EXE -cp ${RESIN_HOME}/lib -jar ${RESIN_HOME}/lib/resin-new-hessian.jar **-Duser.timezone=GMT+8:00** -Duser.language=zh -Duser.country=CN -Dfile.encoding=UTF-8 $*
</code></pre><h2 id="Another-method"><a href="#Another-method" class="headerlink" title="Another method"></a>Another method</h2><pre><code># add below command into your start script
TZ=&quot;Asia/Shanghai&quot;
export TZ
</code></pre><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>    
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/04/29/2015-04-29-centos下安装MediaWiKi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/04/29/2015-04-29-centos下安装MediaWiKi/" itemprop="url">centos下安装MediaWiKi</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-29T10:46:57+08:00">
                2015-04-29
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Requirement"><a href="#Requirement" class="headerlink" title="Requirement"></a>Requirement</h2><ul>
<li>LAMP (Linux+apache+mysql+php)</li>
<li><p>close  PHP mbstring func_overload item</p>
<pre><code>mbstring.func_overload = 0
</code></pre></li>
<li><p>Mysql database setting</p>
<ul>
<li><p>create wiki DB</p>
<pre><code>create database my_wiki default charset=utf-8;
</code></pre></li>
<li><p>grant privileges</p>
<pre><code>grant insert,update,delete,select on my_wiki.* to &apos;wiki&apos;@&apos;localhost&apos; identified by &apos;wiki&apos;;
</code></pre></li>
</ul>
</li>
</ul>
<h2 id="Get-and-Configure"><a href="#Get-and-Configure" class="headerlink" title="Get and Configure"></a>Get and Configure</h2><pre><code>## get 
wget http://releases.wikimedia.org/mediawiki/1.24/mediawiki-1.24.2.tar.gz

## untar to website directory
tar -zxvf mediawiki-1.24.2.tar.gz  -C /var/www/html/mediawiki

## configure apache 
&lt;Directory &quot;/var/www/html&quot;&gt;
DocumentRoot &quot;/var/www/html&quot;

service httpd restart 
</code></pre><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><pre><code>access  https://your-ip/mediawiki
and install refer to the steps 

and be careful to enter mysql connection with your setting 

after all ,you will get a file named LocalSettings.php

put this file to mediawiki/LocalSettings.php 
</code></pre><p><strong><em><code>done</code></em></strong></p>
<hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/04/28/2015-04-28-centos6下Memcache安装/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/04/28/2015-04-28-centos6下Memcache安装/" itemprop="url">centos6下Memcache安装</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-28T17:09:32+08:00">
                2015-04-28
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Memcache/" itemprop="url" rel="index">
                    <span itemprop="name">Memcache</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Requirement"><a href="#Requirement" class="headerlink" title="Requirement"></a>Requirement</h1><pre><code>yum install -y libevent libevent-devel
</code></pre><h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><h2 id="get-source-code"><a href="#get-source-code" class="headerlink" title="get source code"></a>get source code</h2><pre><code>wget http://memcached.org/files/memcached-1.4.24.tar.gz
</code></pre><h2 id="Installation-1"><a href="#Installation-1" class="headerlink" title="Installation"></a>Installation</h2><pre><code>tar -zxvf memcached-1.4.24.tar.gz 
cd memcached-1.4.24  
./configure
make
make install 
</code></pre><h2 id="verify"><a href="#verify" class="headerlink" title="verify"></a>verify</h2><pre><code>[root@e167418cd3b2 /]# ls -lart /usr/local/bin/memcached 
-rwxr-xr-x 1 root root 431374 Apr 27 10:41 /usr/local/bin/memcached
[root@e167418cd3b2 /]# memcached -h
memcached 1.4.24
-p &lt;num&gt;      TCP port number to listen on (default: 11211)
-U &lt;num&gt;      UDP port number to listen on (default: 11211, 0 is off)
-s &lt;file&gt;     UNIX socket path to listen on (disables network support)
-A            enable ascii &quot;shutdown&quot; command
-a &lt;mask&gt;     access mask for UNIX socket, in octal (default: 0700)
-l &lt;addr&gt;     interface to listen on (default: INADDR_ANY, all addresses)


yum install -y wget tar make gcc libevent libevent-devel
wget http://memcached.org/files/memcached-1.4.24.tar.gz &amp;&amp; tar -zxvf memcached-1.4.24.tar.gz &amp;&amp; cd memcached-1.4.24 &amp;&amp; ./configure &amp;&amp; make &amp;&amp; make install 
cd / &amp;&amp; rm -rf memcached-1.4.24* &amp;&amp; yum clean all 
</code></pre><h2 id="start"><a href="#start" class="headerlink" title="start"></a>start</h2><pre><code>/usr/local/bin/memcached -u root -m 128 -p 22422 -c 512 -P /memcached_22422.pid
</code></pre><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/04/28/2015-04-28-centos7下docker升级到1-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/04/28/2015-04-28-centos7下docker升级到1-6/" itemprop="url">centos7下docker升级到1.6</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-28T16:47:59+08:00">
                2015-04-28
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Docker/" itemprop="url" rel="index">
                    <span itemprop="name">Docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="get-latest-docker"><a href="#get-latest-docker" class="headerlink" title="get latest docker"></a>get latest docker</h2><pre><code>wget https://get.docker.io/builds/Linux/x86_64/docker-latest 
</code></pre><h2 id="stop-serivce-and-backup-old"><a href="#stop-serivce-and-backup-old" class="headerlink" title="stop serivce and backup old"></a>stop serivce and backup old</h2><pre><code>service docker stop 

mv /usr/bin/docker /usr/bin/docker.20150428
</code></pre><h2 id="set-new-version"><a href="#set-new-version" class="headerlink" title="set new version"></a>set new version</h2><pre><code>cp docker-latest /usr/bin/docker 
chmod a+x /usr/bin/docker
</code></pre><h2 id="start-new"><a href="#start-new" class="headerlink" title="start new"></a>start new</h2><pre><code>service docker start 

root@pts/0 # docker version 
Client version: 1.6.0
Client API version: 1.18
Go version (client): go1.4.2
Git commit (client): 4749651
OS/Arch (client): linux/amd64
Server version: 1.6.0
Server API version: 1.18
Go version (server): go1.4.2
Git commit (server): 4749651
OS/Arch (server): linux/amd64
</code></pre><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2015/04/22/2015-04-22-centos7下-Jenkins-安装/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/04/22/2015-04-22-centos7下-Jenkins-安装/" itemprop="url">centos7下 Jenkins 安装</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-22T13:02:23+08:00">
                2015-04-22
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Jenkins/" itemprop="url" rel="index">
                    <span itemprop="name">Jenkins</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Requirement"><a href="#Requirement" class="headerlink" title="Requirement"></a>Requirement</h1><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><pre><code>root@pts/0 # java -version 
java version &quot;1.7.0_40&quot;
Java(TM) SE Runtime Environment (build 1.7.0_40-b43)
Java HotSpot(TM) 64-Bit Server VM (build 24.0-b56, mixed mode)
</code></pre><h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><pre><code># get repo
rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key
wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo
yum install jenkins -y
</code></pre><h2 id="Configuration-and-start"><a href="#Configuration-and-start" class="headerlink" title="Configuration and start"></a>Configuration and start</h2><pre><code># auto-start after reboot
chkconfig jenkins on

# start
service jenkins start[stop/restart/status]

# modify jenkins user and login port
sed -i &apos;s@JENKINS_PORT=&quot;8080&quot;@JENKINS_PORT=&quot;8008&quot;@&apos; /etc/sysconfig/jenkins
sed -i &apos;s@JENKINS_USER=&quot;jenkins&quot;@JENKINS_USER=&quot;root&quot;@&apos; /etc/sysconfig/jenkins
# change to root for ssh remote execution

## log path
/var/log/jenkins
# install path /var/lib/jenkins
# /var/lib/jenkins/jobs
# /var/lib/jenkins/workspace
</code></pre><h2 id="Test-installation"><a href="#Test-installation" class="headerlink" title="Test installation"></a>Test installation</h2><pre><code>netstat -tnlp | grep 8080
http://localhost:8080
http://jenkins-server-ip:8080
</code></pre><h2 id="Simple-Usage"><a href="#Simple-Usage" class="headerlink" title="Simple Usage"></a>Simple Usage</h2><h2 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h2><pre><code># error
Starting jenkins (via systemctl):  Job for jenkins.service failed. See &apos;systemctl status jenkins.service&apos; and &apos;journalctl -xn&apos; for details. [FAILED]
# fixed
install java

# error ,forgot to add &apos;admin&apos; to Matrix based security authentication
admin没有Overall/Read权限
# fixed
sed -i &apos;s/youyuan/admin/g&apos; /var/lib/jenkins/config.xml
# reason after signup admin user but forgot to add privileges for it
# &apos;Jenkins&apos; -&gt; &apos;system management&apos; -&gt; &apos;Configure Global Security&apos; -&gt; &apos;Authorization&apos; -&gt; &apos;matrix-based security&apos;
</code></pre><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/colinws.jpg"
               alt="Colin.Liu" />
          <p class="site-author-name" itemprop="name">Colin.Liu</p>
           
              <p class="site-description motion-element" itemprop="description">努力奔向全栈运维</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">38</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">50</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/opscolin" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/users/6d793fbacc88/latest_articles" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  简书
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.csdn.net/eagle5063" target="_blank" title="CSDN">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  CSDN
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.python.org/" title="Python" target="_blank">Python</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.djangoproject.com/" title="Django" target="_blank">Django</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.hhzzer.com/" title="惠露的博客" target="_blank">惠露的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://brucephaner.github.io" title="潘东升" target="_blank">潘东升</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Colin.Liu | </span>


 <span class="site-pv">
   <script src="http://s6.cnzz.com/stat.php?id=1262262453&web_id=1262262453" type="text/javascript"></script>
</span>
 

</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


<br>

<!-- 
<span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次 | 
</span>

<span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</span>

-->

        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
