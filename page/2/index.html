<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="全栈运维" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="努力奔向全栈运维">
<meta property="og:type" content="website">
<meta property="og:title" content="全栈运维">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="全栈运维">
<meta property="og:description" content="努力奔向全栈运维">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="全栈运维">
<meta name="twitter:description" content="努力奔向全栈运维">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title> 全栈运维 - 努力奔向全栈运维 </title>
  












  <div style="display: none;">
    <script src="//s95.cnzz.com/z_stat.php?id=1262262453&web_id=1262262453" language="JavaScript"></script>
  </div>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">全栈运维</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">专注于技术</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-python">
          <a href="/Python/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Python
          </a>
        </li>
      
        
        <li class="menu-item menu-item-mysql">
          <a href="/MySQL/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            MySQL
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-download">
          <a href="/Download/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            下载
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/25/2016-11-25-gitlab-error-RPC-failed/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/25/2016-11-25-gitlab-error-RPC-failed/" itemprop="url">gitlab报错 - RPC failed</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-25T11:39:16+08:00">
                2016-11-25
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Git/" itemprop="url" rel="index">
                    <span itemprop="name">Git</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="导语"><a href="#导语" class="headerlink" title="导语"></a>导语</h2><blockquote>
<p>部门使用的代码管理仓库是gitlab，随着业务发展，代码量也越来越大，到目前已经大于100M，今天新入职员工全量拉取代码时候报错，查找原因是因为代码仓库太大导致拉取超时。 这里记录下处理过程</p>
</blockquote>
<hr>
<h2 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h2><pre><code>fatal: early EOF
fatal: The remote end hung up unexpectedly
fatal: index-pack failed
error: RPC failed; result=18, HTTP code = 200
</code></pre><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>因为这边使用的docker搭建的gitlab，处理方式有点不同<br>必须先进入到gitlab容器中去操作，重启 gitlab 也必须是进入到docker 容器中重启，<br>否则从服务器直接重启容器会导致配置丢失，恢复成默认值</p>
<h3 id="nginx-client-max-body-size"><a href="#nginx-client-max-body-size" class="headerlink" title="nginx client_max_body_size"></a>nginx client_max_body_size</h3><p>之前修改过gitlab前端nginx的 client_max_body_size 大小，确保上传下载超大文件的可能性</p>
<pre><code>vi /etc/nginx/nginx.conf
client_max_body_size 50M;

## check and reload nginx config
nginx -t
nginx -s reload
</code></pre><h3 id="gitlab-timeout"><a href="#gitlab-timeout" class="headerlink" title="gitlab timeout"></a>gitlab timeout</h3><pre><code>## need to enter gitlab container firstly
## then edit the config
vi config/unicorn.rb
timeout 300

## then restart gitlab in container
## remember that must be in container
/etc/init.d/gitlab restart
</code></pre><h3 id="git-http-postBuffer"><a href="#git-http-postBuffer" class="headerlink" title="git http.postBuffer"></a>git http.postBuffer</h3><p>另外建议也修改下本地 http.postBuffer 参数</p>
<pre><code>## modify in commandline 
git config --global http.postBuffer 524288000

## check config list 
git config --list
</code></pre><hr>
<p>最后重新拉取，没有问题</p>
<hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/15/2016-11-15-Python-emumerate-Usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/15/2016-11-15-Python-emumerate-Usage/" itemprop="url">Python emumerate Usage</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-15T14:45:00+08:00">
                2016-11-15
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h2 id="enumerate-说明"><a href="#enumerate-说明" class="headerlink" title="enumerate()说明"></a>enumerate()说明</h2><ul>
<li>enumerate()是python的内置函数</li>
<li>enumerate在字典上是枚举、列举的意思</li>
<li>对于一个可迭代的（iterable）/可遍历的对象（如列表、字符串），enumerate将其组成一个索引序列，利用它可以同时获得索引和值</li>
<li>enumerate多用于在for循环中得到计数</li>
</ul>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><pre><code>&gt;&gt;&gt; goods = [[&apos;appple&apos;,70999],[&apos;banaba&apos;,2000],[&apos;orange&apos;,10000]]
&gt;&gt;&gt; type(goods)
&lt;type &apos;list&apos;&gt;
&gt;&gt;&gt; for index,item in enumerate(goods):
...     print index,item
... 
0 [&apos;appple&apos;, 70999]
1 [&apos;banaba&apos;, 2000]
2 [&apos;orange&apos;, 10000]
&gt;&gt;&gt; for index,item in enumerate(goods):
...     print index,item[0],item[1]
... 
0 appple 70999
1 banaba 2000
2 orange 10000
&gt;&gt;&gt; 

## enumerate可以有第二个参数
&gt;&gt;&gt; for index,item in enumerate(goods,2):
...     print index,item[0],item[1]
... 
2 appple 70999
3 banaba 2000
4 orange 10000
&gt;&gt;&gt; 
</code></pre><h2 id="特殊说明"><a href="#特殊说明" class="headerlink" title="特殊说明"></a>特殊说明</h2><p>文件大小为83M，用python计算文件行数</p>
<p>实际脚本</p>
<pre><code>#!/usr/bin/env python
#-*- coding:utf8 -*-

file = &apos;/usr/local/tomcat/logs/appLog/appLog.2016-11-08.log&apos;


## 方式一，对于文件很大的时候比较慢
#count = len(open(file,&apos;r&apos;).readlines())
#print count


## 方式二，相对比较高效
count = 0
for index, line in enumerate(open(file,&apos;r&apos;)):
    count += 1

print count
</code></pre>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/11/15/2016-11-15-Python-emumerate-Usage/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/15/2016-11-15-Hexo-Error-Collections/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/15/2016-11-15-Hexo-Error-Collections/" itemprop="url">Hexo错误集合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-15T14:37:15+08:00">
                2016-11-15
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>整理hexo遇到的各种问题和解决办法</p>
</blockquote>
<hr>
<h2 id="ERROR-Deployer-not-found-git"><a href="#ERROR-Deployer-not-found-git" class="headerlink" title="ERROR Deployer not found: git"></a>ERROR Deployer not found: git</h2><p><strong>遇到问题</strong></p>
<pre><code>升级hexo之后，执行`hexo d` 遇到问题如下：
hexo  ERROR Deployer not found: git
</code></pre><p><strong>解决</strong></p>
<pre><code>npm install hexo-deployer-git --save
</code></pre><h2 id="hexo-next主题博客在本地显示正常，github内容空白的问题"><a href="#hexo-next主题博客在本地显示正常，github内容空白的问题" class="headerlink" title="hexo next主题博客在本地显示正常，github内容空白的问题"></a>hexo next主题博客在本地显示正常，github内容空白的问题</h2><p><strong>遇到问题</strong></p>
<pre><code>copy原有的hexo项目升级之后，推送最新的代码到github,结果hexo next主题博客在本地显示正常，deploy到github上后只显示框架，内容空白的问题
</code></pre><p><strong>解决</strong></p>
<pre><code>进入next主题的source目录，将vendors文件的文件名改成任意其他名字，如：lcvendors

vim themes/next/_config.yml
vendors:
  # Internal path prefix. Please do not edit it.
  _internal: lcvendors

然后
    hexo clean
    hexo g
    hexo d
</code></pre><p><strong>参考</strong></p>
<p><a href="http://blog.csdn.net/xiangwanpeng/article/details/53155642" target="_blank" rel="external">xiangwanpeng的CSDN博客</a></p>
<h2 id="Error-Cannot-find-module-‘-build-Release-DTraceProviderBindings"><a href="#Error-Cannot-find-module-‘-build-Release-DTraceProviderBindings" class="headerlink" title="Error: Cannot find module ‘./build/Release/DTraceProviderBindings"></a>Error: Cannot find module ‘./build/Release/DTraceProviderBindings</h2><p>这里提示是<code>DTraceProviderBindings</code>模块没有安装</p>
<pre><code>npm install -g dtrace-provider
</code></pre><p>之后再执行 Hexo 相关的命令，但是报上面的错误。</p>
<p><strong>解决</strong></p>
<pre><code>执行下面的命令安装，即可解决
install hexo --no-optional
</code></pre><hr>
<h2 id="待续…"><a href="#待续…" class="headerlink" title="待续…"></a>待续…</h2><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/14/2016-11-14-Flask-config/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/14/2016-11-14-Flask-config/" itemprop="url">Flask的config使用总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-14T15:58:55+08:00">
                2016-11-14
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Flask/" itemprop="url" rel="index">
                    <span itemprop="name">Flask</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>针对项目的不同， <code>flask</code> 可以采用不同配置方式来快速开发</p>
</blockquote>
<h2 id="直接配置"><a href="#直接配置" class="headerlink" title="直接配置"></a>直接配置</h2><pre><code>app.config[&apos;HOST&apos;] = &apos;www.baidu.com&apos;
app.config.update(
    &apos;HOST&apos; = &apos;www.baidu.com&apos;,
    &apos;PORT&apos; = 3306
)
</code></pre><p>查看具体的配置 <code>print app.config.get(&#39;HOST&#39;)</code></p>
<h2 id="通过环境变量加载"><a href="#通过环境变量加载" class="headerlink" title="通过环境变量加载"></a>通过环境变量加载</h2><pre><code>export MyAppConfig=&apos;/etc/flask-setting.cfg&apos;

app.config.from_envvar(&apos;MyAppConfig&apos;)
</code></pre>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2016/11/14/2016-11-14-Flask-config/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/07/2016-11-07-Nginx-error-collections-under-centos/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/07/2016-11-07-Nginx-error-collections-under-centos/" itemprop="url">Nginx - Centos下Nginx报错集合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-11-07T12:06:28+08:00">
                2016-11-07
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Nginx/" itemprop="url" rel="index">
                    <span itemprop="name">Nginx</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>整理Centos系统下Nginx遇到的问题，一遍后续排查问题方便</p>
</blockquote>
<hr>
<h2 id="emerg-could-not-build-the-server-names-hash…"><a href="#emerg-could-not-build-the-server-names-hash…" class="headerlink" title="[emerg] could not build the server_names_hash…"></a>[emerg] could not build the server_names_hash…</h2><p>开始使用nginx只有一个虚拟主机，默认server_name 会使用 localhost, 今天配置nginx的server_name是一个正式存在的域名的时候，报错如下：</p>
<pre><code>root@pts/0 $ nginx -t
nginx: [emerg] could not build the server_names_hash, you should increase server_names_hash_bucket_size: 32
nginx: configuration file /etc/nginx/nginx.conf test failed
</code></pre><h2 id="How-to-fix"><a href="#How-to-fix" class="headerlink" title="How to fix"></a>How to fix</h2><p>在nginx的配置文件nginx.conf的http段添加如下配置：</p>
<pre><code># vi /etc/nginx/nginx.conf
...
http {
        ...
        server_names_hash_max_size 512;
        server_names_hash_bucket_size 128;
        ...
}
...

root@pts/0 $ nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
</code></pre><h2 id="nginx官方对server-name的说明请参考-链接"><a href="#nginx官方对server-name的说明请参考-链接" class="headerlink" title="nginx官方对server_name的说明请参考 链接"></a>nginx官方对<code>server_name</code>的说明请参考 <a href="http://nginx.org/en/docs/http/server_names.html" target="_blank" rel="external">链接</a></h2><div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/14/2016-10-14-install-mysql-module-failed-under-centos7-for-python2-7-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/14/2016-10-14-install-mysql-module-failed-under-centos7-for-python2-7-5/" itemprop="url">centos7下python2.7.5安装MySQL模块失败</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-14T20:13:12+08:00">
                2016-10-14
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="导语"><a href="#导语" class="headerlink" title="导语"></a>导语</h2><blockquote>
<p>在Centos7下，当前python版本是2.7.5，测试实时获取日志然后解析入库中，安装<code>MySQL-python</code>模块报错如<br><code>EnvironmentError: mysql_config not found</code>，原因是缺少了 mysql 相关支持。<br>这里把解决过程记录一下</p>
</blockquote>
<hr>
<p>具体报错信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">root@pts/4 $ pip install MySQL-python</div><div class="line">Collecting MySQL-python</div><div class="line">  Using cached MySQL-python-1.2.5.zip</div><div class="line">    Complete output from command python setup.py egg_info:</div><div class="line">    sh: mysql_config: command not found</div><div class="line">    Traceback (most recent call last):</div><div class="line">      File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;</div><div class="line">      File &quot;/tmp/pip-build-kWowP9/MySQL-python/setup.py&quot;, line 17, in &lt;module&gt;</div><div class="line">        metadata, options = get_config()</div><div class="line">      File &quot;setup_posix.py&quot;, line 43, in get_config</div><div class="line">        libs = mysql_config(&quot;libs_r&quot;)</div><div class="line">      File &quot;setup_posix.py&quot;, line 25, in mysql_config</div><div class="line">        raise EnvironmentError(&quot;%s not found&quot; % (mysql_config.path,))</div><div class="line">    EnvironmentError: mysql_config not found</div><div class="line">    </div><div class="line">    ----------------------------------------</div><div class="line">Command &quot;python setup.py egg_info&quot; failed with error code 1 in /tmp/pip-build-kWowP9/MySQL-python/</div></pre></td></tr></table></figure></p>
<hr>
<p>mysql_config是来自于 <code>mysql-devel</code> ，我用的是MySQL社区版，所以实际安装的是<code>mysql-community-devel</code>，网上的说法是同时安装<code>python-devel</code>，如果你没有安装的话一起安装</p>
<pre><code>yum install python-devel mysql-community-devel -y
</code></pre><p>安装完成之后尝试再次 pip 安装 MySQL-python</p>
<hr>
<h2 id="再次安装"><a href="#再次安装" class="headerlink" title="再次安装"></a>再次安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">root@pts/4 $ pip install MySQL-python</div><div class="line">Collecting MySQL-python</div><div class="line">  Using cached MySQL-python-1.2.5.zip</div><div class="line">Installing collected packages: MySQL-python</div><div class="line">  Running setup.py install for MySQL-python ... done</div><div class="line">Successfully installed MySQL-python-1.2.5</div></pre></td></tr></table></figure>
<hr>
<h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">root@pts/1 $ python</div><div class="line">Python 2.7.5 (default, Sep 15 2016, 22:37:39) </div><div class="line">[GCC 4.8.5 20150623 (Red Hat 4.8.5-4)] on linux2</div><div class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</div><div class="line">&gt;&gt;&gt; import MySQLdb</div><div class="line">&gt;&gt;&gt; MySQLdb.</div><div class="line">MySQLdb.BINARY                                    MySQLdb.OperationalError(                         MySQLdb.__hash__(                                 MySQLdb.debug(</div><div class="line">MySQLdb.Binary(                                   MySQLdb.ProgrammingError(                         MySQLdb.__init__(                                 MySQLdb.escape(</div><div class="line">MySQLdb.Connect(                                  MySQLdb.ROWID                                     MySQLdb.__name__                                  MySQLdb.escape_dict(</div><div class="line">MySQLdb.Connection(                               MySQLdb.STRING                                    MySQLdb.__new__(                                  MySQLdb.escape_sequence(</div><div class="line">MySQLdb.DATE                                      MySQLdb.TIME                                      MySQLdb.__package__                               MySQLdb.escape_string(</div><div class="line">MySQLdb.DATETIME                                  MySQLdb.TIMESTAMP                                 MySQLdb.__path__                                  MySQLdb.get_client_info(</div><div class="line">MySQLdb.DBAPISet(                                 MySQLdb.Time(                                     MySQLdb.__reduce__(                               MySQLdb.paramstyle</div><div class="line">MySQLdb.DataError(                                MySQLdb.TimeFromTicks(                            MySQLdb.__reduce_ex__(                            MySQLdb.release</div><div class="line">MySQLdb.DatabaseError(                            MySQLdb.Timestamp(                                MySQLdb.__repr__(                                 MySQLdb.result(</div><div class="line">MySQLdb.Date(                                     MySQLdb.TimestampFromTicks(                       MySQLdb.__revision__                              MySQLdb.server_end(</div><div class="line">MySQLdb.DateFromTicks(                            MySQLdb.Warning(                                  MySQLdb.__setattr__(                              MySQLdb.server_init(</div><div class="line">MySQLdb.Error(                                    MySQLdb.__all__                                   MySQLdb.__sizeof__(                               MySQLdb.string_literal(</div><div class="line">MySQLdb.FIELD_TYPE                                MySQLdb.__author__                                MySQLdb.__str__(                                  MySQLdb.test_DBAPISet_set_equality(</div><div class="line">MySQLdb.IntegrityError(                           MySQLdb.__class__(                                MySQLdb.__subclasshook__(                         MySQLdb.test_DBAPISet_set_equality_membership(</div><div class="line">MySQLdb.InterfaceError(                           MySQLdb.__delattr__(                              MySQLdb.__version__                               MySQLdb.test_DBAPISet_set_inequality(</div><div class="line">MySQLdb.InternalError(                            MySQLdb.__dict__                                  MySQLdb._mysql                                    MySQLdb.test_DBAPISet_set_inequality_membership(</div><div class="line">MySQLdb.MySQLError(                               MySQLdb.__doc__                                   MySQLdb.apilevel                                  MySQLdb.thread_safe(</div><div class="line">MySQLdb.NULL                                      MySQLdb.__file__                                  MySQLdb.connect(                                  MySQLdb.threadsafety</div><div class="line">MySQLdb.NUMBER                                    MySQLdb.__format__(                               MySQLdb.connection(                               MySQLdb.times</div><div class="line">MySQLdb.NotSupportedError(                        MySQLdb.__getattribute__(                         MySQLdb.constants                                 MySQLdb.version_info</div><div class="line">&gt;&gt;&gt; </div><div class="line">&gt;&gt;&gt; MySQLdb.version_info</div><div class="line">(1, 2, 5, &apos;final&apos;, 1)</div><div class="line">&gt;&gt;&gt;</div></pre></td></tr></table></figure>
<hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/12/2016-10-12-pymongo-connect-to-MongoDB-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/12/2016-10-12-pymongo-connect-to-MongoDB-1/" itemprop="url">pymongo连接MongoDB系列一</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-12T14:40:23+08:00">
                2016-10-12
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MongoDB/" itemprop="url" rel="index">
                    <span itemprop="name">MongoDB</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="导语"><a href="#导语" class="headerlink" title="导语"></a>导语</h2><blockquote>
<p>pymongo 是目前用的相对普遍一个python用来连接MongoDB的库，是工作中各种基本需求都能满足<br>具体api可以参考 <a href="https://api.mongodb.com/python/current/" target="_blank" rel="external">pymongo API</a><br><a href="https://github.com/mongodb/mongo-python-driver" target="_blank" rel="external">pymongo github</a> </p>
</blockquote>
<hr>
<h2 id="安装-MongoDB"><a href="#安装-MongoDB" class="headerlink" title="安装 MongoDB"></a>安装 MongoDB</h2><p>为了测试pyMongo连接mongodb，首先当然需要在centos下安装mongo，详细参考 <a href="http://blog.liuc.me/2015/10/10/Centos%E4%B8%8B%E5%AE%89%E8%A3%85MongoDB/" target="_blank" rel="external">Centos下安装MongoDB</a></p>
<h2 id="安装-pymongo"><a href="#安装-pymongo" class="headerlink" title="安装 pymongo"></a>安装 pymongo</h2><p>如果没有pip， 建议先安装，至于为啥要用pip你懂得</p>
<pre><code>yum install python-pip
</code></pre><p>pip 安装 pymongo</p>
<pre><code>pip install pymongo
</code></pre><p>查看 pymongo是否安装成功</p>
<pre><code>root@pts/4 $ python
Python 2.7.5 (default, Nov 20 2015, 02:00:19) 
[GCC 4.8.5 20150623 (Red Hat 4.8.5-4)] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import pymongo        
&gt;&gt;&gt; pymongo.version
&apos;3.2.2&apos;
</code></pre><hr>
<h2 id="使用-pymongo"><a href="#使用-pymongo" class="headerlink" title="使用 pymongo"></a>使用 pymongo</h2><h3 id="连接到-MongoDB"><a href="#连接到-MongoDB" class="headerlink" title="连接到 MongoDB"></a>连接到 MongoDB</h3><p>有两种方式，等同</p>
<pre><code>&gt;&gt;&gt; client = pymongo.MongoClient(&apos;192.168.100.3&apos;, 27017)
&gt;&gt;&gt; print client
MongoClient(host=[&apos;192.168.100.3:27017&apos;], document_class=dict, tz_aware=False, connect=True)
&gt;&gt;&gt; client2 = pymongo.MongoClient(&apos;mongodb://192.168.100.3:27017/&apos;)
&gt;&gt;&gt; print client2
MongoClient(host=[&apos;192.168.100.3:27017&apos;], document_class=dict, tz_aware=False, connect=True)
&gt;&gt;&gt; 
</code></pre><h3 id="得到-db-和-collection"><a href="#得到-db-和-collection" class="headerlink" title="得到 db 和 collection"></a>得到 db 和 collection</h3><p>有时候在脚本中会把 db 和 collection 作为参数使用，可以参考第二种方式</p>
<p>直接链接</p>
<pre><code>&gt;&gt;&gt; db = client.report
&gt;&gt;&gt; print db
Database(MongoClient(host=[&apos;192.168.100.3:27017&apos;], document_class=dict, tz_aware=False, connect=True), u&apos;report&apos;)
&gt;&gt;&gt; collection = db.source_register
&gt;&gt;&gt; print collection
Collection(Database(MongoClient(host=[&apos;192.168.100.3:27017&apos;], document_class=dict, tz_aware=False, connect=True), u&apos;report&apos;), u&apos;source_register&apos;)
&gt;&gt;&gt; 
</code></pre><p>参数链接， 这种形式又有两种方法</p>
<pre><code>## 定义参数
&gt;&gt;&gt; pramadb = &apos;report&apos;
&gt;&gt;&gt; pramacoll = &apos;source_register&apos;

## get db 
&gt;&gt;&gt; db2 = client[pramadb]
&gt;&gt;&gt; db3 = client.get_database(pramadb)
&gt;&gt;&gt; print db2
Database(MongoClient(host=[&apos;192.168.100.3:27017&apos;], document_class=dict, tz_aware=False, connect=True), u&apos;report&apos;)
&gt;&gt;&gt; print db3
Database(MongoClient(host=[&apos;192.168.100.3:27017&apos;], document_class=dict, tz_aware=False, connect=True), u&apos;report&apos;)
&gt;&gt;&gt; 

## get collection 
&gt;&gt;&gt; coll2 = db2[pramacoll]
&gt;&gt;&gt; coll3 = db3.get_collection(pramacoll)
&gt;&gt;&gt; print coll2
Collection(Database(MongoClient(host=[&apos;192.168.100.3:27017&apos;], document_class=dict, tz_aware=False, connect=True), u&apos;report&apos;), u&apos;source_register&apos;)
&gt;&gt;&gt; print coll3
Collection(Database(MongoClient(host=[&apos;192.168.100.3:27017&apos;], document_class=dict, tz_aware=False, connect=True), u&apos;report&apos;), u&apos;source_register&apos;)
&gt;&gt;&gt; 
</code></pre><h3 id="常规操作举例"><a href="#常规操作举例" class="headerlink" title="常规操作举例"></a>常规操作举例</h3><pre><code>## insert or save 
&gt;&gt;&gt; mydict = {&quot;name&quot;:&quot;James&quot;, &quot;age&quot;: 28}
&gt;&gt;&gt; collection.save(mydict)
ObjectId(&apos;57fdf212bcd34f48c4fce15a&apos;)


## find
&gt;&gt;&gt; collection.find({&quot;name&quot;:&quot;James&quot;})[0]
{u&apos;age&apos;: 28, u&apos;_id&apos;: ObjectId(&apos;57fdf212bcd34f48c4fce15a&apos;), u&apos;name&apos;: u&apos;James&apos;}
&gt;&gt;&gt; 
</code></pre><p>^<em>^ ^</em>^ ^<em>^ 未完待续… ^</em>^ ^<em>^ ^</em>^</p>
<hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/09/29/2016-09-29-python配置tab自动不全/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/29/2016-09-29-python配置tab自动不全/" itemprop="url">python配置tab自动不全</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-29T19:34:55+08:00">
                2016-09-29
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><pre><code>有时候Centos系统默认安装的python进入交互模式下不能使用tab快捷键功能，这个时候需要自己进行相关配置
</code></pre><hr>
<h2 id="tab-py"><a href="#tab-py" class="headerlink" title="tab.py"></a>tab.py</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python </span></div><div class="line"><span class="comment"># python startup file </span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> readline</div><div class="line"><span class="keyword">import</span> rlcompleter</div><div class="line"><span class="keyword">import</span> atexit</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="comment"># tab completion </span></div><div class="line">readline.parse_and_bind(<span class="string">'tab: complete'</span>)</div><div class="line"><span class="comment"># history file </span></div><div class="line">histfile = os.path.join(os.environ[<span class="string">'HOME'</span>], <span class="string">'.pythonhistory'</span>)</div><div class="line"><span class="keyword">try</span>:</div><div class="line">    readline.read_history_file(histfile)</div><div class="line"><span class="keyword">except</span> IOError:</div><div class="line">    <span class="keyword">pass</span></div><div class="line">atexit.register(readline.write_history_file, histfile)</div><div class="line"><span class="keyword">del</span> os, histfile, readline, rlcompleter</div></pre></td></tr></table></figure>
<hr>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><pre><code>这里以python.27为例，把
</code></pre><ul>
<li>上面的tab.py 放到 /usr/lib/python2.7/site-packages/ 下面，需要先导入sys，再倒入tab模块</li>
<li>可以把tab.py的内容放到 <code>/root/.pythontab</code>文件中，然后在<code>/root/.bash_profile</code>中添加<code>export PYTHONSTARTUP=~/.pythontab</code>， 这种方式不需要再次导入 tab 模块</li>
</ul>
<hr>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><pre><code class="python">root@pts/<span class="number">2</span> $ python 
Python <span class="number">2.7</span><span class="number">.5</span> (default, Sep <span class="number">15</span> <span class="number">2016</span>, <span class="number">22</span>:<span class="number">37</span>:<span class="number">39</span>) 
[GCC <span class="number">4.8</span><span class="number">.5</span> <span class="number">20150623</span> (Red Hat <span class="number">4.8</span><span class="number">.5</span><span class="number">-4</span>)] on linux2
Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> <span class="keyword">or</span> <span class="string">"license"</span> <span class="keyword">for</span> more information.
<span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys
<span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> tab
<span class="meta">&gt;&gt;&gt; </span>sys.
sys.__class__(              sys.__stdout__              sys.executable              sys.path
sys.__delattr__(            sys.__str__(                sys.exit(                   sys.path_hooks
sys.__dict__                sys.__subclasshook__(       sys.exitfunc(               sys.path_importer_cache
</code></pre>
<h2 id="附加"><a href="#附加" class="headerlink" title="附加"></a>附加</h2><pre><code>PYTHONSTARTUP 官网解释：
If this is the name of a readable file, the Python commands in that file are executed before the first prompt is displayed in interactive mode. The file is executed in the same namespace where interactive commands are executed so that objects defined or imported in it can be used without qualification in the interactive session. You can also change the prompts sys.ps1 and sys.ps2 in this file.

简单来说就是这个文件会在第一次进入交互模式的时候会被执行，所以把tab.py 加入到这个变量设定的文件中就可以达到自动导入tab.py，实现自动补全的功能
</code></pre><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>    
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/09/26/2016-09-26-Hexo配置评论统计搜索/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/26/2016-09-26-Hexo配置评论统计搜索/" itemprop="url">Hexo配置评论统计搜索</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-26T21:01:10+08:00">
                2016-09-26
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>Hexo搭建好之后,可以编写markdown文档，渲染之后就可以生成静态页面博客，如果此时能有评论模块可以增加和同行之间的互动和知识交流，能有访问统计等，只能知道那篇博客的内容更受大家欢迎等等。</p>
</blockquote>
<hr>
<h2 id="配置-duoshuo-评论"><a href="#配置-duoshuo-评论" class="headerlink" title="配置 duoshuo 评论"></a>配置 duoshuo 评论</h2><h3 id="创建多说账号"><a href="#创建多说账号" class="headerlink" title="创建多说账号"></a>创建多说账号</h3><h4 id="多说网站-注册自己账号"><a href="#多说网站-注册自己账号" class="headerlink" title="多说网站 注册自己账号"></a>多说网站 注册自己账号</h4><p><img src="/images/duoshuo-1.png" alt="多说官网注册"></p>
<h4 id="一般情况可以用百度账号或者QQ等直接登录"><a href="#一般情况可以用百度账号或者QQ等直接登录" class="headerlink" title="一般情况可以用百度账号或者QQ等直接登录"></a>一般情况可以用百度账号或者QQ等直接登录</h4><p><img src="/images/duoshuo-2.png" alt="用QQ或者百度账号直接登录"></p>
<h4 id="duoshuo-shortname-设置"><a href="#duoshuo-shortname-设置" class="headerlink" title="duoshuo_shortname 设置"></a>duoshuo_shortname 设置</h4><p>在如下图中的“多说域名”这里填写的 “liuc” 就是 duoshuo_shortname<br><img src="/images/duoshuo-3.png" alt="duoshuo_shortname 设置"></p>
<p>修改站点配置文件 _config.yml 添加如下配置</p>
<pre><code>## duoshuo
duoshuo_shortname: liuc
</code></pre><h4 id="评论测试"><a href="#评论测试" class="headerlink" title="评论测试"></a>评论测试</h4><p><code>hexo d -g</code> 发布代码查看效果，发现多说评论系统已经添加<br><img src="/images/duoshuo-4.png" alt="多说评论效果测试"></p>
<h3 id="评论开启或者关闭设置"><a href="#评论开启或者关闭设置" class="headerlink" title="评论开启或者关闭设置"></a>评论开启或者关闭设置</h3><p>默认情况下，需要在每篇文章中开启评论，但是在标签页，分类页、关于页等关掉评论</p>
<pre><code>comments: true 开启评论
comments: false 关闭评论
</code></pre><p>但是手动在每篇文章中添加比较费事，可以按下面的步骤添加默认行为</p>
<h4 id="文章页默认开启"><a href="#文章页默认开启" class="headerlink" title="文章页默认开启"></a>文章页默认开启</h4><pre><code>root@pts/3 $ cat scaffolds/post.md 
---
title: {{ title }}
date: {{ date }}
tags: 
categories: 
toc: true
comments:true
---
</code></pre><h4 id="关闭标签页，分类页、关于页等评论"><a href="#关闭标签页，分类页、关于页等评论" class="headerlink" title="关闭标签页，分类页、关于页等评论"></a>关闭标签页，分类页、关于页等评论</h4><p>这里以标签页为例子</p>
<pre><code>root@pts/3 $ cat source/tags/index.md 
---
title: tags
date: 2016-09-24 17:59:42
type: &quot;tags&quot;
comments: false
---
</code></pre><hr>
<h2 id="配置-阅读次数统计"><a href="#配置-阅读次数统计" class="headerlink" title="配置 阅读次数统计"></a>配置 阅读次数统计</h2><pre><code>待续
</code></pre><h2 id="配置-Swiftype-搜索"><a href="#配置-Swiftype-搜索" class="headerlink" title="配置 Swiftype 搜索"></a>配置 Swiftype 搜索</h2><pre><code>待续
</code></pre><hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/09/25/2016-09-25-Centos下pyenv安装python多版本-增强版/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Colin.Liu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/colinws.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="全栈运维">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/25/2016-09-25-Centos下pyenv安装python多版本-增强版/" itemprop="url">Centos下pyenv安装python多版本(增强版)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-09-25T20:35:17+08:00">
                2016-09-25
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-13T22:29:00+08:00">
                2017-06-13
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Centos-下-pyenv-安装-python-多版本"><a href="#Centos-下-pyenv-安装-python-多版本" class="headerlink" title="Centos 下 pyenv 安装 python 多版本"></a>Centos 下 pyenv 安装 python 多版本</h2><blockquote>
<p>在学习和利用python开发的很多情况下，需要多版本的Python并存。此时需要在系统中安装多个Python，但又不能影响系统自带的 Python。pyenv 就是这样一个 Python 版本管理器。</p>
</blockquote>
<h2 id="当前情况"><a href="#当前情况" class="headerlink" title="当前情况"></a>当前情况</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">## 当天系统</div><div class="line">root@pts/2 $ cat /etc/redhat-release </div><div class="line">CentOS Linux release 7.1.1503 (Core) </div><div class="line"></div><div class="line">## 当前 python 情况</div><div class="line">root@pts/2 $ python</div><div class="line">python            python2           python2.7         python2.7-config  python2-config    python-config     </div><div class="line">root@pts/2 $ python -V</div><div class="line">Python 2.7.5</div></pre></td></tr></table></figure>
<h2 id="安装-pyenv"><a href="#安装-pyenv" class="headerlink" title="安装 pyenv"></a>安装 pyenv</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">## 安装</div><div class="line">root@pts/2 $ git clone https://github.com/yyuu/pyenv.git ~/.pyenv</div><div class="line">Cloning into &apos;/root/.pyenv&apos;...</div><div class="line">remote: Counting objects: 12744, done.</div><div class="line">remote: Total 12744 (delta 0), reused 0 (delta 0), pack-reused 12744</div><div class="line">Receiving objects: 100% (12744/12744), 2.26 MiB | 453.00 KiB/s, done.</div><div class="line">Resolving deltas: 100% (8837/8837), done.</div><div class="line"></div><div class="line">## 配置</div><div class="line">root@pts/2 $ vim ~/.bashrc </div><div class="line">root@pts/2 $ cat ~/.bashrc </div><div class="line">    # .bashrc</div><div class="line">    </div><div class="line">    # User specific aliases and functions</div><div class="line">    </div><div class="line">    alias rm=&apos;rm -i&apos;</div><div class="line">    alias cp=&apos;cp -i&apos;</div><div class="line">    alias mv=&apos;mv -i&apos;</div><div class="line">    </div><div class="line">    ## add by liuchao at 20160607</div><div class="line">    export PYENV_ROOT=&quot;$HOME/.pyenv&quot;</div><div class="line">    export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;</div><div class="line">    eval &quot;$(pyenv init -)&quot;</div><div class="line">    </div><div class="line">    # Source global definitions</div><div class="line">    if [ -f /etc/bashrc ]; then</div><div class="line">    	. /etc/bashrc</div><div class="line">    fi</div><div class="line"></div><div class="line">## 配置生效</div><div class="line">    ### 方式一</div><div class="line">    重新打开一个session</div><div class="line">    ### 方式二</div><div class="line">    source ~/.bashrc</div><div class="line">    ### 方式三</div><div class="line">    exec $SHELL -l</div></pre></td></tr></table></figure>
<h2 id="安装多版本"><a href="#安装多版本" class="headerlink" title="安装多版本"></a>安装多版本</h2><h3 id="检查pyenv-安装的版本"><a href="#检查pyenv-安装的版本" class="headerlink" title="检查pyenv 安装的版本"></a>检查pyenv 安装的版本</h3><pre><code>root@pts/3 $ pyenv versions
* system (set by /root/.pyenv/version)
</code></pre><p><code>安装之前需要安装一些依赖包，否则会报如下错误</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">root@pts/2 $ pyenv install 3.4.4</div><div class="line">Downloading Python-3.4.4.tgz...</div><div class="line">-&gt; https://www.python.org/ftp/python/3.4.4/Python-3.4.4.tgz</div><div class="line">Installing Python-3.4.4...</div><div class="line">WARNING: The Python bz2 extension was not compiled. Missing the bzip2 lib?</div><div class="line">WARNING: The Python readline extension was not compiled. Missing the GNU readline lib?</div><div class="line">ERROR: The Python ssl extension was not compiled. Missing the OpenSSL lib?</div><div class="line"></div><div class="line">Please consult to the Wiki page to fix the problem.</div><div class="line">https://github.com/yyuu/pyenv/wiki/Common-build-problems</div><div class="line"></div><div class="line"></div><div class="line">BUILD FAILED (CentOS Linux 7 using python-build 20160509-25-g4c654d7)</div><div class="line"></div><div class="line">Inspect or clean up the working tree at /tmp/python-build.20160607105740.3166</div><div class="line">Results logged to /tmp/python-build.20160607105740.3166.log</div><div class="line"></div><div class="line">Last 10 log lines:</div><div class="line">(cd /root/.pyenv/versions/3.4.4/share/man/man1; ln -s python3.4.1 python3.1)</div><div class="line">if test &quot;xupgrade&quot; != &quot;xno&quot;  ; then \</div><div class="line">	case upgrade in \</div><div class="line">		upgrade) ensurepip=&quot;--upgrade&quot; ;; \</div><div class="line">		install|*) ensurepip=&quot;&quot; ;; \</div><div class="line">	esac; \</div><div class="line">	 ./python -E -m ensurepip \</div><div class="line">		$ensurepip --root=/ ; \</div><div class="line">fi</div><div class="line">Ignoring ensurepip failure: pip 7.1.2 requires SSL/TLS</div></pre></td></tr></table></figure></p>
<h3 id="安装相关依赖"><a href="#安装相关依赖" class="headerlink" title="安装相关依赖"></a>安装相关依赖</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">yum install readline readline-devel readline-static -y</div><div class="line">yum install openssl openssl-devel openssl-static -y</div><div class="line">yum install sqlite-devel -y</div><div class="line">yum install bzip2-devel bzip2-libs -y</div></pre></td></tr></table></figure>
<h3 id="安装多版本-1"><a href="#安装多版本-1" class="headerlink" title="安装多版本"></a>安装多版本</h3><blockquote>
<ul>
<li>pyenv 安装原理：<br>  从官网下载对应的版本压缩包到<code>/tmp/目录</code>，然后在<code>/tmp/目录</code> 执行编译安装，安装到<code>~/.pyenv/versions/</code>下面</li>
<li>pyenv 安装很慢的解决办法：<br> 可以先手动下载对应的版本压缩包，放到<code>~/.pyenv/cache/</code>下面，pyenv会校验md5值和完整性，确认无误的话就不会重新下载直接从这里安装</li>
</ul>
</blockquote>
<p><strong> &gt;&gt;附件修改 201606008&lt;&lt;</strong><br>详细可以参考 <a href="http://www.jianshu.com/p/f3190b697e8d" target="_blank" rel="external">pyenv ~/.pyenv/cache 不生效问题</a></p>
<blockquote>
<p>关于上面说的如果用 <code>pyenv install</code> 安装很慢的话，可以下载版本压缩包到 <code>~/.pyenv/cache/</code> 目录，这里有个很关键的问题所在，具体如下：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">添加 -v 参数安装的时候看到下载的文件名字是 &apos;Python-3.4.4.tgz&apos;，如果</div><div class="line">把这个文件名copy到 ~/.pyenv/cache/ 下面的是不起作用的，还是会继续</div><div class="line">重新下载。</div><div class="line"></div><div class="line">查找问题后发现，-v 显示的是下载 &apos;Python-3.4.4.tgz&apos;， 但是</div><div class="line">在/tmp/python-xxxxxx.xxxx/ 目录下面却显示的是 &apos;Python-3.4.4.tar.gz&apos; 文件。</div><div class="line"></div><div class="line">所以把下载的 &apos;Python-3.4.4.tgz&apos; 改名为 &apos;Python-3.4.4.tar.gz&apos; 后放到</div><div class="line"> ~/.pyenv/cache/ 下面后，然后 pyenv install 3.4.4 -v 就不会重新下载了。</div><div class="line"></div><div class="line">注意： </div><div class="line">    不能采用把 Python-3.4.4.tgz 解压之后才压缩成 Python-3.4.4.tar.gz 的方式，</div><div class="line">因为这样的话会导致源文件的md5值发生变化。而校验失败重新下载</div></pre></td></tr></table></figure>
<p><code>-v</code> 显示完整的安装过程<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">root@pts/2 $ pyenv install 3.4.4 `[-v]`</div><div class="line">Downloading Python-3.4.4.tgz...</div><div class="line">-&gt; https://www.python.org/ftp/python/3.4.4/Python-3.4.4.tgz</div><div class="line">Installing Python-3.4.4...</div><div class="line">Installed Python-3.4.4 to /root/.pyenv/versions/3.4.4</div></pre></td></tr></table></figure></p>
<h2 id="检查"><a href="#检查" class="headerlink" title="检查"></a>检查</h2><pre><code>## 查看目前已经安装的
## system 表示系统安装的
## * 代表当前使用的是那个版本
root@pts/3 $ pyenv versions
* system (set by /root/.pyenv/version)
  3.4.4
</code></pre><h2 id="更新数据库"><a href="#更新数据库" class="headerlink" title="更新数据库"></a>更新数据库</h2><pre><code>pyenv rehash 
</code></pre><h2 id="设置全局python"><a href="#设置全局python" class="headerlink" title="设置全局python"></a>设置全局python</h2><pre><code>root@pts/3 $ python -V
Python 2.7.5

root@pts/3 $ pyenv global 3.4.4 
root@pts/3 $ pyenv versions
  system
* 3.4.4 (set by /root/.pyenv/version)

root@pts/3 $ python -V
Python 3.4.4
</code></pre><h2 id="设置临时python版本"><a href="#设置临时python版本" class="headerlink" title="设置临时python版本"></a>设置临时python版本</h2><pre><code>## 在当前session执行
pyenv local 2.7.11
pyenv shell 2.7.11

## 检查发现是从/tmp来设置的临时
root@pts/3 $ pyenv versions
  system
* 2.7.11 (set by /tmp/python-build.20160607105740.3166/Python-3.4.4/.python-version)
  3.4.4
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">## 在另外一个session中验证</div><div class="line">root@pts/5 $ python -V</div><div class="line">Python 3.4.4</div><div class="line">Dev-mysql-mem [~] 2016-06-07 11:44:30</div><div class="line">root@pts/5 $ pyenv versions </div><div class="line">system</div><div class="line">2.7.11</div><div class="line">* 3.4.4 (set by /root/.pyenv/version)</div></pre></td></tr></table></figure>
<h2 id="Refer-to"><a href="#Refer-to" class="headerlink" title="Refer to"></a>Refer to</h2><blockquote>
<p><a href="https://github.com/yyuu/pyenv/blob/master/COMMANDS.md#command-reference" target="_blank" rel="external">pyenv命令列表</a></p>
</blockquote>
<hr>
<div align="center"><br>公众号:  DailyJobOps<br><img src="/images/qrcode_for_gh_da4929fed8ed_430.jpg" width="200" height="200" alt="DailyJobOps"><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/colinws.jpg"
               alt="Colin.Liu" />
          <p class="site-author-name" itemprop="name">Colin.Liu</p>
           
              <p class="site-description motion-element" itemprop="description">努力奔向全栈运维</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">41</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">15</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">51</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/opscolin" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/users/6d793fbacc88/latest_articles" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  简书
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://blog.csdn.net/eagle5063" target="_blank" title="CSDN">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  CSDN
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.python.org/" title="Python" target="_blank">Python</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.djangoproject.com/" title="Django" target="_blank">Django</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.hhzzer.com/" title="惠露的博客" target="_blank">惠露的博客</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://brucephaner.github.io" title="潘东升" target="_blank">潘东升</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        
<div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Colin.Liu | </span>


 <span class="site-pv">
   <script src="http://s6.cnzz.com/stat.php?id=1262262453&web_id=1262262453" type="text/javascript"></script>
</span>
 

</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


<br>

<!-- 
<span id="busuanzi_container_site_pv">
    本站总访问量<span id="busuanzi_value_site_pv"></span>次 | 
</span>

<span id="busuanzi_container_site_uv">
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</span>

-->

        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
